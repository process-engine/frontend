{"version":3,"sources":["../../src/helpers/Html.js"],"names":["path","require","Html","props","assets","component","store","content","renderToString","head","rewind","messageBusProvider","config","messageBus","messageBusEndPointName","base","toComponent","title","meta","link","script","Object","keys","styles","map","style","key","length","__html","resolve","routedComponentsPath","AppComponentName","_style","getState","javascript","main","propTypes","object","node","exports","module"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;;;AAWA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;;IAEMC,I;;;;;;;;;;6BAOK;AAAA,mBAC8B,KAAKC,KADnC;AAAA,UACCC,MADD,UACCA,MADD;AAAA,UACSC,SADT,UACSA,SADT;AAAA,UACoBC,KADpB,UACoBA,KADpB;;AAEP,UAAMC,UAAUF,YAAY,iBAASG,cAAT,CAAwBH,SAAxB,CAAZ,GAAiD,EAAjE;AACA,UAAMI,OAAO,sBAAOC,MAAP,EAAb;;AAEA,UAAIC,qBAAqB,IAAzB;AACA,UAAI,KAAKR,KAAL,CAAWS,MAAX,CAAkBC,UAAtB,EAAkC;AAChCF,6BACE,0CAAQ,KAAK,OAAO,KAAKR,KAAL,CAAWS,MAAX,CAAkBE,sBAAlB,IAA4C,MAAnD,IAA6D,YAA1E,EAAwF,SAAQ,OAAhG,GADF;AAED;AACD,aACE;AAAA;AAAA,UAAM,MAAK,OAAX;AACA;AAAA;AAAA;AACGL,eAAKM,IAAL,CAAUC,WAAV,EADH;AAEGP,eAAKQ,KAAL,CAAWD,WAAX,EAFH;AAGGP,eAAKS,IAAL,CAAUF,WAAV,EAHH;AAIGP,eAAKU,IAAL,CAAUH,WAAV,EAJH;AAKGP,eAAKW,MAAL,CAAYJ,WAAZ,EALH;AAOE,kDAAM,KAAI,YAAV,EAAuB,MAAK,yCAA5B,GAPF;AAQE,kDAAM,KAAI,eAAV,EAA0B,MAAK,cAA/B,GARF;AAUE,kDAAM,MAAK,UAAX,EAAsB,SAAQ,qCAA9B,GAVF;AAYGK,iBAAOC,IAAP,CAAYlB,OAAOmB,MAAnB,EAA2BC,GAA3B,CAA+B,UAACC,KAAD,EAAQC,GAAR;AAAA,mBAC9B,wCAAM,MAAMtB,OAAOmB,MAAP,CAAcE,KAAd,CAAZ,EAAkC,KAAKC,GAAvC,EAA4C,OAAM,oBAAlD,EAAuE,KAAI,YAA3E,EAAwF,MAAK,UAA7F;AACM,uBAAQ,OADd,GAD8B;AAAA,WAA/B,CAZH;AAqBGL,iBAAOC,IAAP,CAAYlB,OAAOmB,MAAnB,EAA2BI,MAA3B,KAAsC,CAAtC,GAA0C;AACvC,qCAAyB,EAAEC,QAAQ3B,QAAQD,KAAK6B,OAAL,CAAa,KAAK1B,KAAL,CAAWS,MAAX,CAAkBkB,oBAA/B,EAAqD,KAAK3B,KAAL,CAAWS,MAAX,CAAkBmB,gBAAvE,EAAyF,KAAK5B,KAAL,CAAWS,MAAX,CAAkBmB,gBAAlB,GAAqC,OAA9H,CAAR,EAAgJC,MAA1J,EADc,GAA1C,GACoM;AAtBvM,SADA;AAyBA;AAAA;AAAA;AACA,iDAAK,IAAG,SAAR,EAAkB,yBAAyB,EAAEJ,QAAQrB,OAAV,EAA3C,GADA;AAEA,oDAAQ,yBAAyB,EAAEqB,2BAAyB,mCAAUtB,MAAM2B,QAAN,EAAV,CAAzB,MAAF,EAAjC,EAA8F,SAAQ,OAAtG,GAFA;AAGCtB,4BAHD;AAIA,oDAAQ,KAAKP,OAAO8B,UAAP,CAAkBC,IAA/B,EAAqC,SAAQ,OAA7C;AAJA;AAzBA,OADF;AAkCD;;;4BAlDMC,S,GAAY;AACjBhC,UAAQ,iBAAUiC,MADD;AAEjBhC,aAAW,iBAAUiC,IAFJ;AAGjBhC,SAAO,iBAAU+B;AAHA,C;;;AAqDrBE,UAAUC,OAAOD,OAAP,GAAiBrC,IAA3B","file":"Html.js","sourcesContent":["'use strict';\n\nimport React, { Component, PropTypes } from 'react';\nimport ReactDOM from 'react-dom/server';\nimport serialize from 'serialize-javascript';\nimport Helmet from 'react-helmet';\n\n/**\n * Wrapper component containing HTML metadata and boilerplate tags.\n * Used in server-side code only to wrap the string output of the\n * rendered route component.\n *\n * The only thing this component doesn't (and can't) include is the\n * HTML doctype declaration, which is added to the rendered output\n * by the server.js file.\n */\n\n\nconst path = require('path');\n\nclass Html extends Component {\n  static propTypes = {\n    assets: PropTypes.object,\n    component: PropTypes.node,\n    store: PropTypes.object\n  };\n\n  render() {\n    const { assets, component, store } = this.props;\n    const content = component ? ReactDOM.renderToString(component) : '';\n    const head = Helmet.rewind();\n\n    let messageBusProvider = null;\n    if (this.props.config.messageBus) {\n      messageBusProvider = (\n        <script src={\"/\" + (this.props.config.messageBusEndPointName || 'faye') + \"/client.js\"} charSet=\"UTF-8\"/>);\n    }\n    return (\n      <html lang=\"en-us\">\n      <head>\n        {head.base.toComponent()}\n        {head.title.toComponent()}\n        {head.meta.toComponent()}\n        {head.link.toComponent()}\n        {head.script.toComponent()}\n\n        <link rel=\"stylesheet\" href=\"/vendor/bpmn-font/css/bpmn-embedded.css\"/>\n        <link rel=\"shortcut icon\" href=\"/favicon.ico\"/>\n\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n        {/* styles (will be present only in production with webpack extract text plugin) */}\n        {Object.keys(assets.styles).map((style, key) =>\n          <link href={assets.styles[style]} key={key} media=\"screen, projection\" rel=\"stylesheet\" type=\"text/css\"\n                charSet=\"UTF-8\"/>\n        )}\n\n        {/* (will be present only in development mode) */}\n        {/* outputs a <style/> tag with all bootstrap styles + App.scss + it could be CurrentPage.scss. */}\n        {/* can smoothen the initial style flash (flicker) on page load in development mode. */}\n        {/* ideally one could also include here the style for the current page (Home.scss, About.scss, etc) */}\n        {Object.keys(assets.styles).length === 0 ? <style\n            dangerouslySetInnerHTML={{ __html: require(path.resolve(this.props.config.routedComponentsPath, this.props.config.AppComponentName, this.props.config.AppComponentName + '.scss'))._style }}/> : null}\n      </head>\n      <body>\n      <div id=\"content\" dangerouslySetInnerHTML={{ __html: content }}/>\n      <script dangerouslySetInnerHTML={{ __html: `window.__data=${serialize(store.getState())};` }} charSet=\"UTF-8\"/>\n      {messageBusProvider}\n      <script src={assets.javascript.main} charSet=\"UTF-8\"/>\n      </body>\n      </html>\n    );\n  }\n}\n\nexports = module.exports = Html;\n"]}