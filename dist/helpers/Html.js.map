{"version":3,"sources":["../../src/helpers/Html.js"],"names":["path","require","Html","props","assets","component","store","content","renderToString","head","rewind","messageBusProvider","config","messageBus","messageBusEndPointName","staticScriptTags","staticDlls","split","forEach","elem","push","staticDllURLPath","trim","base","toComponent","title","meta","link","script","Object","keys","styles","map","style","key","length","__html","resolve","routedComponentsPath","AppComponentName","_style","getState","javascript","main","propTypes","object","node","exports","module"],"mappings":"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","file":"Html.js","sourcesContent":["'use strict';\n\nimport React, { Component, PropTypes } from 'react';\nimport ReactDOM from 'react-dom/server';\nimport serialize from 'serialize-javascript';\nimport Helmet from 'react-helmet';\n\n/**\n * Wrapper component containing HTML metadata and boilerplate tags.\n * Used in server-side code only to wrap the string output of the\n * rendered route component.\n *\n * The only thing this component doesn't (and can't) include is the\n * HTML doctype declaration, which is added to the rendered output\n * by the server.js file.\n */\n\n\nconst path = require('path');\n\nclass Html extends Component {\n  static propTypes = {\n    assets: PropTypes.object,\n    component: PropTypes.node,\n    store: PropTypes.object\n  };\n\n  render() {\n    const { assets, component, store } = this.props;\n    const content = component ? ReactDOM.renderToString(component) : '';\n    const head = Helmet.rewind();\n\n    let messageBusProvider = null;\n    if (this.props.config.messageBus) {\n      messageBusProvider = (\n        <script src={\"/\" + (this.props.config.messageBusEndPointName || 'faye') + \"/client.js\"} charSet=\"UTF-8\"/>);\n    }\n\n    let staticScriptTags = [];\n    if (this.props.config.staticDlls) {\n      this.props.config.staticDlls.split(',').forEach((elem) => {\n        staticScriptTags.push(<script src={\"/\" + (this.props.config.staticDllURLPath + \"/\" + elem.trim() + \".dll.js\")} charSet=\"UTF-8\"/>);\n      });\n    }\n    return (\n      <html lang=\"en-us\">\n      <head>\n        {head.base.toComponent()}\n        {head.title.toComponent()}\n        {head.meta.toComponent()}\n        {head.link.toComponent()}\n        {head.script.toComponent()}\n\n        {staticScriptTags}\n\n        <link rel=\"stylesheet\" href=\"/processManager/vendor/bpmn-font/css/bpmn-embedded.css\"/>\n\n        <link rel=\"shortcut icon\" href=\"/favicon.ico\"/>\n\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n        {/* styles (will be present only in production with webpack extract text plugin) */}\n        {Object.keys(assets.styles).map((style, key) =>\n          <link href={assets.styles[style]} key={key} media=\"screen, projection\" rel=\"stylesheet\" type=\"text/css\"\n                charSet=\"UTF-8\"/>\n        )}\n\n        {/* (will be present only in development mode) */}\n        {/* outputs a <style/> tag with all bootstrap styles + App.scss + it could be CurrentPage.scss. */}\n        {/* can smoothen the initial style flash (flicker) on page load in development mode. */}\n        {/* ideally one could also include here the style for the current page (Home.scss, About.scss, etc) */}\n        {Object.keys(assets.styles).length === 0 ? <style\n            dangerouslySetInnerHTML={{ __html: require(path.resolve(this.props.config.routedComponentsPath, this.props.config.AppComponentName, this.props.config.AppComponentName + '.scss'))._style }}/> : null}\n      </head>\n      <body>\n      <div id=\"content\" dangerouslySetInnerHTML={{ __html: content }}/>\n      <script dangerouslySetInnerHTML={{ __html: `window.__data=${serialize(store.getState())};` }} charSet=\"UTF-8\"/>\n      {messageBusProvider}\n      <script src={assets.javascript.main} charSet=\"UTF-8\"/>\n      </body>\n      </html>\n    );\n  }\n}\n\nexports = module.exports = Html;\n"]}